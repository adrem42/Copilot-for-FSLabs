<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Copilot for FSLabs</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Copilot for FSLabs</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_Action">Class Action </a></li>
<li><a href="#Class_Event">Class Event </a></li>
</ul>


<h2>Libraries</h2>
<ul class="nowrap">
  <li><strong>Event</strong></li>
  <li><a href="../libraries/copilot.html">copilot</a></li>
  <li><a href="../libraries/FSL2Lua.html">FSL2Lua</a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
  <li><a href="../manual/flows.md.html">Flows</a></li>
  <li><a href="../manual/installation.md.html">Installation</a></li>
  <li><a href="../manual/listofcontrols.md.html">FSLabs cockpit controls</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/custom.lua.html">custom.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Event</code></h1>
<p>
</p>
<p>
</p>


<h2><a href="#Class_Action">Class Action </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Action:new">Action:new(callback[, flags])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:setEnabled">Action:setEnabled(value)</a></td>
	<td class="summary">Enables or disables the action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:removeEventRef">Action:removeEventRef(refType, ...)</a></td>
	<td class="summary">Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopCurrent">Action:stopCurrent()</a></td>
	<td class="summary">If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, stops the execution of the currently running coroutine immediately.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopOn">Action:stopOn(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addCleanup">Action:addCleanup(func)</a></td>
	<td class="summary">Can be used when the action can be stopped &ndash; function func will be executed when the action is stopped.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addLogMsg">Action:addLogMsg(msg)</a></td>
	<td class="summary">Add log info that will be logged when the action is started or stopped</td>
	</tr>
</table>
<h2><a href="#Class_Event">Class Event </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Event:new">Event:new([data])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addAction">Event:addAction(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addOneOffAction">Event:addOneOffAction(...)</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event:addAction">addAction</a> but the action will be removed from event&rsquo;s action list after it&rsquo;s executed once.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:removeAction">Event:removeAction(action)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:trigger">Event:trigger(...)</a></td>
	<td class="summary">Triggers the event which in turn executes all actions (if they are enabled).</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Class_Action"></a>Class Action </h2>

    <dl class="function">
    <dt>
    <a name = "Action:new"></a>
    <strong>Action:new(callback[, flags])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>


        </li>
        <li><span class="parameter">flags</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;runAsCoroutine&rsquo;
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:setEnabled"></a>
    <strong>Action:setEnabled(value)</strong>
    </dt>
    <dd>
    Enables or disables the action.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">value</span>
            <span class="types"><span class="type">bool</span></span>
         True to enable the action, false to disable.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:removeEventRef"></a>
    <strong>Action:removeEventRef(refType, ...)</strong>
    </dt>
    <dd>
    Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">refType</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;stop&rsquo;
        </li>
        <li><span class="parameter">...</span>
         one or more <a href="#Class_Event">Event</a> object
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">copilot.actions.preflight:removeEventRef(<span class="string">'stop'</span>, copilot.events.enginesStarted)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:stopCurrent"></a>
    <strong>Action:stopCurrent()</strong>
    </dt>
    <dd>
    If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, stops the execution of the currently running coroutine immediately.







</dd>
    <dt>
    <a name = "Action:stopOn"></a>
    <strong>Action:stopOn(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         One or more events. If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, the callback coroutine will be stopped when these events are triggered.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myAction:stopOn(copilot.events.takeoffAborted, copilot.events.takeoffCancelled)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:addCleanup"></a>
    <strong>Action:addCleanup(func)</strong>
    </dt>
    <dd>
    Can be used when the action can be stopped &ndash; function func will be executed when the action is stopped.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">func</span>
            <span class="types"><span class="type">function</span></span>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "Action:addLogMsg"></a>
    <strong>Action:addLogMsg(msg)</strong>
    </dt>
    <dd>
    Add log info that will be logged when the action is started or stopped


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Class_Event"></a>Class Event </h2>

    <dl class="function">
    <dt>
    <a name = "Event:new"></a>
    <strong>Event:new([data])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span> A table containing the following fields:
        <ul>
        <li><span class="parameter">action</span>
         Function or <a href="#Class_Action">Action</a> object or array of functions or <a href="#Class_Action">Action</a> objects that will be executed when the event is triggered.<br/>
 If it&rsquo;s an array of functions, each function can optionally be followed by string &lsquo;runAsCoroutine&rsquo;.<br/>
 Actions can also be added to an existing event via <a href="../libraries/Event.html#Event:addAction">addAction</a>.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">logMsg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Message that will be logged when the event is triggered.
         (<em>optional</em>)
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> event1 = Event:new {
 action = <span class="keyword">function</span>() <span class="global">print</span> <span class="string">"test action"</span> <span class="keyword">end</span>,
 logMsg = <span class="string">"test event"</span>
}

<span class="keyword">local</span> event2 = Event:new {
 action = {
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 1"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>,
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 2"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>
 },
 logMsg = <span class="string">"test event with coroutine actions"</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addAction"></a>
    <strong>Event:addAction(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Either a function with the optional flag &lsquo;runAsCoroutine&rsquo; as the second argument or an <a href="#Class_Action">Action</a> object.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The added <a href="#Class_Action">Action</a> object.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>, <span class="string">'runAsCoroutine'</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addOneOffAction"></a>
    <strong>Event:addOneOffAction(...)</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event:addAction">addAction</a> but the action will be removed from event&rsquo;s action list after it&rsquo;s executed once.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>


        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event:removeAction"></a>
    <strong>Event:removeAction(action)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">action</span>
         An <a href="#Class_Action">Action</a> object that was added to this event.
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> myAction = myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>)
myEvent:removeAction(myAction)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:trigger"></a>
    <strong>Event:trigger(...)</strong>
    </dt>
    <dd>
    Triggers the event which in turn executes all actions (if they are enabled).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Any number of arguments that will be passed to each callback. The callbacks will also receive the event as the first parameter.
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-04-22 14:08:38 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
