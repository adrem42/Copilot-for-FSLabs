<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Copilot for FSLabs 2.2.1</title>
    <link rel="stylesheet" href="../ldoc_pale.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Copilot for FSLabs 2.2.1</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_Action">Class Action </a></li>
<li><a href="#Class_Event">Class Event </a></li>
<li><a href="#Class_SingleEvent">Class SingleEvent </a></li>
</ul>


<h2>Libraries</h2>
<ul class="nowrap">
  <li><a href="../libraries/FSL2Lua.html">FSL2Lua</a></li>
  <li><a href="../libraries/copilot.html">copilot</a></li>
  <li><strong>Event</strong></li>
  <li><a href="../libraries/VoiceCommand.html">VoiceCommand</a></li>
  <li><a href="../libraries/PhraseUtils.html">PhraseUtils</a></li>
  <li><a href="../libraries/Joystick.html">Joystick</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/Checklist.html">Checklist</a></li>
  <li><a href="../classes/TextMenu.html">TextMenu</a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
  <li><a href="../manual/checklists.md.html">Checklists</a></li>
  <li><a href="../manual/flows.md.html">Flows of the Pilot Monitoring</a></li>
  <li><a href="../manual/fsuipc.md.html">FSUIPC Lua API compatibility</a></li>
  <li><a href="../manual/installation.md.html">Installation</a></li>
  <li><a href="../manual/list_of_keys.md.html">Keyboard keys</a></li>
  <li><a href="../manual/listofcontrols.md.html">FSLabs cockpit controls</a></li>
  <li><a href="../manual/plugins.md.html">Making a plugin</a></li>
  <li><a href="../manual/standalonescripts.md.html">Using the keyboard and joystick binding facilities</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/autorun.lua.html">autorun.lua</a></li>
  <li><a href="../examples/copilot_aircond_prompt.lua.html">copilot_aircond_prompt.lua</a></li>
  <li><a href="../examples/copilot_complex_phrase.lua.html">copilot_complex_phrase.lua</a></li>
  <li><a href="../examples/copilot_events_example.lua.html">copilot_events_example.lua</a></li>
  <li><a href="../examples/copilot_examples.lua.html">copilot_examples.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Event</code></h1>
<p>Copilot's event library.</p>
<p>

</p>


<h2><a href="#Class_Action">Class Action </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Action:new">Action:new(callback[, flags])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:setEnabled">Action:setEnabled(value)</a></td>
	<td class="summary">Enables or disables the action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:isThreadRunning">Action:isThreadRunning()</a></td>
	<td class="summary">Returns true if the callback was configured to be run as a coroutine and is running now.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:removeEventRef">Action:removeEventRef(refType, ...)</a></td>
	<td class="summary">Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopCurrentThread">Action:stopCurrentThread()</a></td>
	<td class="summary">If the action was configured to be run as a coroutine, stops the execution of the currently running coroutine immediately.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopOn">Action:stopOn(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addCleanup">Action:addCleanup(callback)</a></td>
	<td class="summary">Can be used when the action can be stopped - the callback will be executed when the action is stopped.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:setLogMsg">Action:setLogMsg(msg)</a></td>
	<td class="summary">Add log info that will be logged when the action is started or stopped</td>
	</tr>
</table>
<h2><a href="#Class_Event">Class Event </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Event:new">Event:new([args])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addAction">Event:addAction(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addOneOffAction">Event:addOneOffAction(...)</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#SingleEvent:addAction">addAction</a> but the action will be removed from event's action list after it's executed once.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:removeAction">Event:removeAction(action)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:trigger">Event:trigger(...)</a></td>
	<td class="summary">Triggers the event which in turn executes all actions (if they are enabled).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.waitForEvent">Event.waitForEvent(event[, returnFunction=false])</a></td>
	<td class="summary">Waits for an event or returns a function that tells whether the event was signaled.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.waitForEventWithTimeout">Event.waitForEventWithTimeout(timeout, event)</a></td>
	<td class="summary">Waits for the event or until the timeout is elapsed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.waitForEvents">Event.waitForEvents(events[, waitForAll=false][, returnFunction=false])</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event.waitForEvent">waitForEvent</a> but for multiple events</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.waitForEventsWithTimeout">Event.waitForEventsWithTimeout(timeout, events[, waitForAll=false])</a></td>
	<td class="summary">Waits for multiple events or until the timeout is elapsed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.fromKeyPress">Event.fromKeyPress(key)</a></td>
	<td class="summary">Constructs an event from a key press.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.fromTextMenu">Event.fromTextMenu(title, prompt, items[, timeout=0])</a></td>
	<td class="summary">Constructs an event from a TextMenu.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:setActionOrder">Event:setActionOrder(action)</a></td>
	<td class="summary">Sets order of the event's actions relative to each other.</td>
	</tr>
</table>
<h2><a href="#Class_SingleEvent">Class SingleEvent </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#SingleEvent:addAction">SingleEvent:addAction(...)</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event:addAction">Event:addAction</a>, but if the event has already been signaled, the action will execute immediately.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#SingleEvent:trigger">SingleEvent:trigger(...)</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event:trigger">Event:trigger</a>, but does nothing after being called once.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Class_Action"></a>Class Action </h2>

    <dl class="function">
    <dt>
    <a name = "Action:new"></a>
    <strong>Action:new(callback[, flags])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>



        </li>
        <li><span class="parameter">flags</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         'runAsCoroutine'
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:setEnabled"></a>
    <strong>Action:setEnabled(value)</strong>
    </dt>
    <dd>
    Enables or disables the action.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">value</span>
            <span class="types"><span class="type">bool</span></span>
         True to enable the action, false to disable.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:isThreadRunning"></a>
    <strong>Action:isThreadRunning()</strong>
    </dt>
    <dd>
    Returns true if the callback was configured to be run as a coroutine and is running now.







</dd>
    <dt>
    <a name = "Action:removeEventRef"></a>
    <strong>Action:removeEventRef(refType, ...)</strong>
    </dt>
    <dd>
    Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">refType</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         'stop'
        </li>
        <li><span class="parameter">...</span>
         One or more <a href="#Class_Event">Event</a>'s
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">copilot.actions.preflight:removeEventRef(<span class="string">'stop'</span>, copilot.events.enginesStarted)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:stopCurrentThread"></a>
    <strong>Action:stopCurrentThread()</strong>
    </dt>
    <dd>
    If the action was configured to be run as a coroutine, stops the execution of the currently running coroutine immediately.







</dd>
    <dt>
    <a name = "Action:stopOn"></a>
    <strong>Action:stopOn(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         One or more events. If the 'runAsCoroutine' flag was passed to the constructor, the callback coroutine will be stopped when these events are triggered.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myAction:stopOn(copilot.events.takeoffAborted, copilot.events.takeoffCancelled)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:addCleanup"></a>
    <strong>Action:addCleanup(callback)</strong>
    </dt>
    <dd>
    Can be used when the action can be stopped - the callback will be executed when the action is stopped.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "Action:setLogMsg"></a>
    <strong>Action:setLogMsg(msg)</strong>
    </dt>
    <dd>
    Add log info that will be logged when the action is started or stopped


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Class_Event"></a>Class Event </h2>

    <dl class="function">
    <dt>
    <a name = "Event:new"></a>
    <strong>Event:new([args])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">args</span> A table containing the following fields:
        <ul>
        <li><span class="parameter">action</span>
         Function or <a href="#Class_Action">Action</a> or array of either that will be executed when the event is triggered. <br/>
 If it's an array of functions, each function can optionally be followed by string 'runAsCoroutine'. <br/>
 Actions can also be added to an existing event via <a href="../libraries/Event.html#Event:addAction">addAction</a>.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">logMsg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Message that will be logged when the event is triggered.
         (<em>optional</em>)
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> event1 = Event:new {
 action = <span class="keyword">function</span>() <span class="global">print</span> <span class="string">"test action"</span> <span class="keyword">end</span>,
 logMsg = <span class="string">"test event"</span>
}

<span class="keyword">local</span> event2 = Event:new {
 action = {
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 1"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>,
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 2"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>
 },
 logMsg = <span class="string">"test event with coroutine actions"</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addAction"></a>
    <strong>Event:addAction(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Either a function with the optional flag 'runAsCoroutine' as the second argument or an <a href="#Class_Action">Action</a>.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The added <a href="#Class_Action">Action</a>.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>, <span class="string">'runAsCoroutine'</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addOneOffAction"></a>
    <strong>Event:addOneOffAction(...)</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#SingleEvent:addAction">addAction</a> but the action will be removed from event's action list after it's executed once.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event:removeAction"></a>
    <strong>Event:removeAction(action)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">action</span>
         An <a href="#Class_Action">Action</a> that was added to this event.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> myAction = myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>)
myEvent:removeAction(myAction)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:trigger"></a>
    <strong>Event:trigger(...)</strong>
    </dt>
    <dd>
    Triggers the event which in turn executes all actions (if they are enabled).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Any number of arguments that will be passed to each listener as the event's payload (following the first argument, which is always the event itself)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event.waitForEvent"></a>
    <strong>Event.waitForEvent(event[, returnFunction=false])</strong>
    </dt>
    <dd>
    Waits for an event or returns a function that tells whether the event was signaled.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">event</span>
         <a href="#Class_Event">Event</a>
        </li>
        <li><span class="parameter">returnFunction</span>
            <span class="types"><span class="type">bool</span></span>



         (<em>default</em> false)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

         If returnFunction is false, waitForEvent waits for the event itself and returns you its payload.
 If returnFunction is true, waitForEvent returns a function that returns:<br>
 1. Boolean that indicates whether the event was signaled<br>
 2. Function that returns the event's payload.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">Event.waitForEvent(copilot.events.landing)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event.waitForEventWithTimeout"></a>
    <strong>Event.waitForEventWithTimeout(timeout, event)</strong>
    </dt>
    <dd>
    Waits for the event or until the timeout is elapsed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">timeout</span>
            <span class="types"><span class="type">int</span></span>
         Timeout in milliseconds
        </li>
        <li><span class="parameter">event</span>
         <a href="#Class_Event">Event</a>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        True if the event was signaled or Event.TIMEOUT</li>
        <li>
        Function that returns the event's payload.</li>
    </ol>




</dd>
    <dt>
    <a name = "Event.waitForEvents"></a>
    <strong>Event.waitForEvents(events[, waitForAll=false][, returnFunction=false])</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event.waitForEvent">waitForEvent</a> but for multiple events


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">events</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Array of <a href="#Class_Event">Event</a>'s.
        </li>
        <li><span class="parameter">waitForAll</span>
            <span class="types"><span class="type">bool</span></span>



         (<em>default</em> false)
        </li>
        <li><span class="parameter">returnFunction</span>
            <span class="types"><span class="type">bool</span></span>



         (<em>default</em> false)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>

<p> If returnFunction is false:</p>

<ul>
    <li>If waitForall is true: Table with events as keys and functions that return their payload as values.</li>
    <li>If waitForAll is false: The first event that was signaled, a function that returns its payload and the event's array index.</li>
</ul>

<p>If returnFunction is true, a function that returns the following values: </p>

<ul>
    <li>If waitForall is true:
    <ol>
        <li>Boolean that indicates whether all events were signaled.</li>
        <li>Table with events as keys and functions that return their payload as values.</li>
    </ol></li>
    <li>If waitForAll is false:
    <ol>
        <li>An event that was signaled or nil.</li>
        <li>Function that returns the signaled event's payload.</li>
    </ol></li>
</ul>
</li>
        <li>
        Only when returnFunction and waitForAll are false: Function that returns the signaled event's payload.</li>
    </ol>




</dd>
    <dt>
    <a name = "Event.waitForEventsWithTimeout"></a>
    <strong>Event.waitForEventsWithTimeout(timeout, events[, waitForAll=false])</strong>
    </dt>
    <dd>
    Waits for multiple events or until the timeout is elapsed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">timeout</span>
            <span class="types"><span class="type">int</span></span>
         Timeout in milliseconds
        </li>
        <li><span class="parameter">events</span>
         Array of <a href="#Class_Event">Event</a>'s
        </li>
        <li><span class="parameter">waitForAll</span>
            <span class="types"><span class="type">bool</span></span>
         Whether to wait for any event or all events to be signaled.
         (<em>default</em> false)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        If waitForAll is true: Table with events as keys and functions that return their payload as values or Event.TIMEOUT<br>
 If waitForAll is false: The first event that was signaled or Event.TIMEOUT</li>
        <li>
        If waitForAll is false: Function that returns the signaled event's payload.</li>
        <li>
        If waitForAll is false: Array index of the event</li>
    </ol>




</dd>
    <dt>
    <a name = "Event.fromKeyPress"></a>
    <strong>Event.fromKeyPress(key)</strong>
    </dt>
    <dd>
    Constructs an event from a key press.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
         See <a href="../libraries/FSL2Lua.html#Bind">FSL2Lua.Bind</a>
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        <a href="#Class_Event">Event</a>
    </ol>




</dd>
    <dt>
    <a name = "Event.fromTextMenu"></a>
    <strong>Event.fromTextMenu(title, prompt, items[, timeout=0])</strong>
    </dt>
    <dd>
    Constructs an event from a TextMenu.  The menu is shown immediately.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">title</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         The title of the menu
        </li>
        <li><span class="parameter">prompt</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         The message that is displayed between the title and the items. Empty string is allowed.
        </li>
        <li><span class="parameter">items</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         Array of strings representing the menu items
        </li>
        <li><span class="parameter">timeout</span>
            <span class="types"><span class="type">int</span></span>
         The menu's timeout. 0 means infinite timeout.
         (<em>default</em> 0)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>


<p> An <a href="#Class_SingleEvent">SingleEvent</a>. The event will produce the following payload values:  </p>

<ol>
    <li>The result. One of these:<br>
    <ul>
        <li>TextMenuResult.OK</li>
        <li>TextMenuResult.Replaced</li>
        <li>TextMenuResult.Removed</li>
        <li>TextMenuResult.Timeout</li>
    </ul></li>
    <li>The index of the selected item.</li>
    <li>The selected item as a string.</li>
</ol>

    </ol>




</dd>
    <dt>
    <a name = "Event:setActionOrder"></a>
    <strong>Event:setActionOrder(action)</strong>
    </dt>
    <dd>
    Sets order of the event's actions relative to each other.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">action</span>
         An <a href="#Class_Action">Action</a> which will serve as an anchor for positioning other actions in front or after it.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

         A table with four functions: 'front', 'back', 'before' and 'after. 'Before' and 'after' take a variable
number of <a href="#Class_Action">Action</a>'s. All four functions optionally take a boolean as the last parameter which defaults to true
 if omitted. If the last parameter is true and both the anchor action and the other actions are coroutines,
 the coroutines will not be run simultaneously.</p>

<p> An error will be thrown if there is a cycle in the ordering.

    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> event = Event:new()

<span class="keyword">local</span> second = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"second"</span> <span class="keyword">end</span>)
<span class="keyword">local</span> first = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"first"</span> <span class="keyword">end</span>)
<span class="keyword">local</span> fourth = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"fourth"</span> <span class="keyword">end</span>)
<span class="keyword">local</span> third = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"third"</span> <span class="keyword">end</span>)

event:trigger()
 <span class="comment">-- second
</span> <span class="comment">-- first
</span> <span class="comment">-- fourth
</span> <span class="comment">-- third
</span>
<span class="global">print</span> <span class="string">"--------------------------------------------------"</span>

event:setActionOrder(first):before(second)
event:setActionOrder(second):before(third)
event:setActionOrder(third):before(fourth)

 <span class="comment">--[[
Another possibility:

event:setActionOrder(first):front()
event:setActionOrder(fourth):back()
event:setActionOrder(second):after(first):before(third)

]]</span>

event:trigger()

 <span class="comment">-- first
</span> <span class="comment">-- second
</span> <span class="comment">-- third
</span> <span class="comment">-- fourth
</span>
<span class="global">print</span> <span class="string">"--------------------------------------------------"</span>

event = event:new()

second = event:addAction(<span class="keyword">function</span>()
  <span class="keyword">for</span> _ = <span class="number">1</span>, <span class="number">4</span> <span class="keyword">do</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>
  <span class="global">print</span> <span class="string">"second"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

first = event:addAction(<span class="keyword">function</span>()
  <span class="keyword">for</span> _ = <span class="number">1</span>, <span class="number">5</span> <span class="keyword">do</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>
  <span class="global">print</span> <span class="string">"first"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

fourth = event:addAction(<span class="keyword">function</span>()
  <span class="global">print</span> <span class="string">"fourth"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

third = event:addAction(<span class="keyword">function</span>()
  <span class="keyword">for</span> _ = <span class="number">1</span>, <span class="number">3</span> <span class="keyword">do</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>
  <span class="global">print</span> <span class="string">"third"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

event:setActionOrder(second):before(third):after(first)
event:setActionOrder(third):before(fourth)

event:trigger()

 <span class="comment">-- first
</span> <span class="comment">-- second
</span> <span class="comment">-- third
</span> <span class="comment">-- fourth</span></pre>
    </ul>

</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_SingleEvent"></a>Class SingleEvent </h2>

          <div class="section-description">
          An Event that can be signaled only once
          </div>
    <dl class="function">
    <dt>
    <a name = "SingleEvent:addAction"></a>
    <strong>SingleEvent:addAction(...)</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event:addAction">Event:addAction</a>, but if the event has already been signaled, the action will execute immediately.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "SingleEvent:trigger"></a>
    <strong>SingleEvent:trigger(...)</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event:trigger">Event:trigger</a>, but does nothing after being called once.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2021-05-22 12:54:59 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
