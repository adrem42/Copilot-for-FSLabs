<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Copilot for FSLabs</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Copilot for FSLabs</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_Action">Class Action </a></li>
<li><a href="#Class_Event">Class Event </a></li>
<li><a href="#Class_VoiceCommand">Class VoiceCommand </a></li>
</ul>


<h2>Libraries</h2>
<ul class="nowrap">
  <li><strong>Event</strong></li>
  <li><a href="../libraries/copilot.html">copilot</a></li>
  <li><a href="../libraries/FSL2Lua.html">FSL2Lua</a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
  <li><a href="../manual/flows.md.html">Flows</a></li>
  <li><a href="../manual/installation.md.html">Installation</a></li>
  <li><a href="../manual/listofcontrols.md.html">FSLabs cockpit controls</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/custom.lua.html">custom.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Event</code></h1>
<p>
</p>
<p>
</p>


<h2><a href="#Class_Action">Class Action </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Action:new">Action:new(callback[, flags])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:setEnabled">Action:setEnabled(value)</a></td>
	<td class="summary">Enables or disables the action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:removeEventRef">Action:removeEventRef(refType, ...)</a></td>
	<td class="summary">Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopCurrent">Action:stopCurrent()</a></td>
	<td class="summary">If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, stops the execution of the currently running coroutine immediately.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopOn">Action:stopOn(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addCleanup">Action:addCleanup(func)</a></td>
	<td class="summary">Can be used when the action can be stopped &ndash; function func will be executed when the action is stopped.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addLogMsg">Action:addLogMsg(msg)</a></td>
	<td class="summary">Add log info that will be logged when the action is started or stopped</td>
	</tr>
</table>
<h2><a href="#Class_Event">Class Event </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Event:new">Event:new([data])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addAction">Event:addAction(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addOneOffAction">Event:addOneOffAction(...)</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event:addAction">addAction</a> but the action will be removed from event&rsquo;s action list after it&rsquo;s executed once.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:removeAction">Event:removeAction(action)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:trigger">Event:trigger(...)</a></td>
	<td class="summary">Triggers the event which in turn executes all actions (if they are enabled).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:waitForEvent">Event:waitForEvent(event, returnFunction)</a></td>
	<td class="summary">static method</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:waitForEvents">Event:waitForEvents(events[, waitForAll=false])</a></td>
	<td class="summary">Static method &ndash; same as <a href="../libraries/Event.html#Event:waitForEvent">waitForEvent</a> but for multiple events</td>
	</tr>
</table>
<h2><a href="#Class_VoiceCommand">Class VoiceCommand </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:new">VoiceCommand:new(data)</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:activate">VoiceCommand:activate()</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:ignore">VoiceCommand:ignore()</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:deactivate">VoiceCommand:deactivate()</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:activateOn">VoiceCommand:activateOn(...)</a></td>
	<td class="summary">The voice command will become active when the events passed as parameters are triggered.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:deactivateOn">VoiceCommand:deactivateOn(...)</a></td>
	<td class="summary">The voice command will be deactivated when the events passed as parameters are triggered.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:ignoreOn">VoiceCommand:ignoreOn(...)</a></td>
	<td class="summary">The voice command will go into ignore mode when the events passed as parameters</p>

<p> are triggered.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:removeEventRef">VoiceCommand:removeEventRef(refType, ...)</a></td>
	<td class="summary">Use this you want to disable the effect of <a href="../libraries/Event.html#VoiceCommand:activateOn">activateOn</a>, <a href="../libraries/Event.html#VoiceCommand:deactivateOn">deactivateOn</a> or <a href="../libraries/Event.html#VoiceCommand:ignore">ignore</a> for one of the predefined voice commands in <a href="../libraries/copilot.html#voiceCommands">copilot.voiceCommands</a></td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Class_Action"></a>Class Action </h2>

    <dl class="function">
    <dt>
    <a name = "Action:new"></a>
    <strong>Action:new(callback[, flags])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>


        </li>
        <li><span class="parameter">flags</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;runAsCoroutine&rsquo;
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:setEnabled"></a>
    <strong>Action:setEnabled(value)</strong>
    </dt>
    <dd>
    Enables or disables the action.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">value</span>
            <span class="types"><span class="type">bool</span></span>
         True to enable the action, false to disable.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:removeEventRef"></a>
    <strong>Action:removeEventRef(refType, ...)</strong>
    </dt>
    <dd>
    Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">refType</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;stop&rsquo;
        </li>
        <li><span class="parameter">...</span>
         one or more <a href="#Class_Event">Event</a> object
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">copilot.actions.preflight:removeEventRef(<span class="string">'stop'</span>, copilot.events.enginesStarted)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:stopCurrent"></a>
    <strong>Action:stopCurrent()</strong>
    </dt>
    <dd>
    If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, stops the execution of the currently running coroutine immediately.







</dd>
    <dt>
    <a name = "Action:stopOn"></a>
    <strong>Action:stopOn(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         One or more events. If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, the callback coroutine will be stopped when these events are triggered.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myAction:stopOn(copilot.events.takeoffAborted, copilot.events.takeoffCancelled)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:addCleanup"></a>
    <strong>Action:addCleanup(func)</strong>
    </dt>
    <dd>
    Can be used when the action can be stopped &ndash; function func will be executed when the action is stopped.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">func</span>
            <span class="types"><span class="type">function</span></span>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "Action:addLogMsg"></a>
    <strong>Action:addLogMsg(msg)</strong>
    </dt>
    <dd>
    Add log info that will be logged when the action is started or stopped


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Class_Event"></a>Class Event </h2>

    <dl class="function">
    <dt>
    <a name = "Event:new"></a>
    <strong>Event:new([data])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span> A table containing the following fields:
        <ul>
        <li><span class="parameter">action</span>
         Function or <a href="#Class_Action">Action</a> object or array of functions or <a href="#Class_Action">Action</a> objects that will be executed when the event is triggered.<br/>
 If it&rsquo;s an array of functions, each function can optionally be followed by string &lsquo;runAsCoroutine&rsquo;.<br/>
 Actions can also be added to an existing event via <a href="../libraries/Event.html#Event:addAction">addAction</a>.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">logMsg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Message that will be logged when the event is triggered.
         (<em>optional</em>)
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> event1 = Event:new {
 action = <span class="keyword">function</span>() <span class="global">print</span> <span class="string">"test action"</span> <span class="keyword">end</span>,
 logMsg = <span class="string">"test event"</span>
}

<span class="keyword">local</span> event2 = Event:new {
 action = {
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 1"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>,
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 2"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>
 },
 logMsg = <span class="string">"test event with coroutine actions"</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addAction"></a>
    <strong>Event:addAction(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Either a function with the optional flag &lsquo;runAsCoroutine&rsquo; as the second argument or an <a href="#Class_Action">Action</a> object.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The added <a href="#Class_Action">Action</a> object.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>, <span class="string">'runAsCoroutine'</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addOneOffAction"></a>
    <strong>Event:addOneOffAction(...)</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event:addAction">addAction</a> but the action will be removed from event&rsquo;s action list after it&rsquo;s executed once.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>


        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event:removeAction"></a>
    <strong>Event:removeAction(action)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">action</span>
         An <a href="#Class_Action">Action</a> object that was added to this event.
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> myAction = myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>)
myEvent:removeAction(myAction)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:trigger"></a>
    <strong>Event:trigger(...)</strong>
    </dt>
    <dd>
    Triggers the event which in turn executes all actions (if they are enabled).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Any number of arguments that will be passed to each callback. The callbacks will also receive the event as the first parameter.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event:waitForEvent"></a>
    <strong>Event:waitForEvent(event, returnFunction)</strong>
    </dt>
    <dd>
    static method


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">event</span>
         an <a href="#Class_Event">Event</a> object
        </li>
        <li><span class="parameter">returnFunction</span>
            <span class="types"><span class="type">bool</span></span>
         If true, waitForEvent returns a function that returns true once the event gets triggered, else waitForEvent returns when the event is triggered.
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Event.waitForEvent(copilot.events.landing)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:waitForEvents"></a>
    <strong>Event:waitForEvents(events[, waitForAll=false])</strong>
    </dt>
    <dd>
    Static method &ndash; same as <a href="../libraries/Event.html#Event:waitForEvent">waitForEvent</a> but for multiple events


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">events</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         array of <a href="#Class_Event">Event</a> objects
        </li>
        <li><span class="parameter">waitForAll</span>
            <span class="types"><span class="type">bool</span></span>


         (<em>default</em> false)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">function</span></span>
        if waitForAll is true, this function works the same as the one returned by <a href="../libraries/Event.html#Event:waitForEvent">waitForEvent</a> and returns true once all events have been triggered</p>

<p> Otherwise, for every event that has been triggered, it returns the event object
    </ol>




</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_VoiceCommand"></a>Class VoiceCommand </h2>

          <div class="section-description">
          VoiceCommand is a subclass of <a href="#Class_Event">Event</a>. </p>

<p> A voice command can be in one of these  states:</p>

<ol>
<li><p>Deactivated: the phrases aren&rsquo;t in the recognizer&rsquo;s grammar.</p></li>
<li><p>Ignore mode: the phrases are in the recognizer&rsquo;s grammar but recognition events don&rsquo;t trigger the voice command.</p></li>
<li><p>Active: the phrases are in the recognizer&rsquo;s grammar and Copilot triggers the voice command.</p></li>
</ol>


<p> If you only have a couple of phrases in the recognizer, especially short ones, the accuracy will be low and
 the recognizer will recognize just about anything as those phrases. On the other hand, having a lot of phrases
 will also degrade the accuracy.
          </div>
    <dl class="function">
    <dt>
    <a name = "VoiceCommand:new"></a>
    <strong>VoiceCommand:new(data)</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span> A table containing the following fields (also the fields taken by <a href="../libraries/Event.html#Event:new">the parent constructor</a>):
        <ul>
        <li><span class="parameter">phrase</span>
         string or array of strings
        </li>
        <li><span class="parameter">confidence</span>
            <span class="types"><span class="type">number</span></span>
         between 0 and 1
         (<em>default</em> 0.93)
        </li>
        <li><span class="parameter">persistent</span>
        <ul>
<li>ommited or false: the voice command will be deactivated after being triggered.</li>
<li>&lsquo;ignore&rsquo;: the voice command will be put into ignore mode after being triggered.</li>
<li>true: the voice command will stay active after being triggered.</li>
</ul>


         (<em>default</em> false)
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> myVoiceCommand = VoiceCommand:new {
 phrase = <span class="string">"hello"</span>,
 confidence = <span class="number">0.95</span>,
 action = <span class="keyword">function</span>() <span class="global">print</span> <span class="string">"hi there"</span> <span class="keyword">end</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "VoiceCommand:activate"></a>
    <strong>VoiceCommand:activate()</strong>
    </dt>
    <dd>
    <span>



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:ignore"></a>
    <strong>VoiceCommand:ignore()</strong>
    </dt>
    <dd>
    <span>



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:deactivate"></a>
    <strong>VoiceCommand:deactivate()</strong>
    </dt>
    <dd>
    <span>



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:activateOn"></a>
    <strong>VoiceCommand:activateOn(...)</strong>
    </dt>
    <dd>
    The voice command will become active when the events passed as parameters are triggered. </p>

<p> Adds an &lsquo;activate&rsquo; event reference that can be removed from the event via <a href="../libraries/Event.html#Action:removeEventRef">removeEventRef</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
          one or more events
        </li>
    </ul>





</dd>
    <dt>
    <a name = "VoiceCommand:deactivateOn"></a>
    <strong>VoiceCommand:deactivateOn(...)</strong>
    </dt>
    <dd>
    The voice command will be deactivated when the events passed as parameters are triggered. </p>

<p> Adds a &lsquo;deactivate&rsquo; event reference that can be removed from the event via <a href="../libraries/Event.html#Action:removeEventRef">removeEventRef</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
          one or more events
        </li>
    </ul>





</dd>
    <dt>
    <a name = "VoiceCommand:ignoreOn"></a>
    <strong>VoiceCommand:ignoreOn(...)</strong>
    </dt>
    <dd>
    The voice command will go into ignore mode when the events passed as parameters</p>

<p> are triggered. </p>

<p> Adds a &lsquo;ignore&rsquo; event reference that can be removed from the event via <a href="../libraries/Event.html#Action:removeEventRef">removeEventRef</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
          one or more events
        </li>
    </ul>





</dd>
    <dt>
    <a name = "VoiceCommand:removeEventRef"></a>
    <strong>VoiceCommand:removeEventRef(refType, ...)</strong>
    </dt>
    <dd>
    Use this you want to disable the effect of <a href="../libraries/Event.html#VoiceCommand:activateOn">activateOn</a>, <a href="../libraries/Event.html#VoiceCommand:deactivateOn">deactivateOn</a> or <a href="../libraries/Event.html#VoiceCommand:ignore">ignore</a> for one of the predefined voice commands in <a href="../libraries/copilot.html#voiceCommands">copilot.voiceCommands</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">refType</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;activate&rsquo;, &lsquo;deactivate&rsquo; or &lsquo;ignore&rsquo;
        </li>
        <li><span class="parameter">...</span>
         one or more <a href="#Class_Event">Event</a> objects
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">copilot.voiceCommands.gearUp:removeEventRef(<span class="string">'activate'</span>,
copilot.events.goAround, copilot.events.takeoffInitiated)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-04-21 02:53:16 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
