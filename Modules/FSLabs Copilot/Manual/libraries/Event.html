<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Copilot for FSLabs 1.1.1</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Copilot for FSLabs 1.1.1</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Class_Action">Class Action </a></li>
<li><a href="#Class_Event">Class Event </a></li>
<li><a href="#Class_VoiceCommand">Class VoiceCommand </a></li>
</ul>


<h2>Libraries</h2>
<ul class="nowrap">
  <li><strong>Event</strong></li>
  <li><a href="../libraries/copilot.html">copilot</a></li>
  <li><a href="../libraries/FSL2Lua.html">FSL2Lua</a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
  <li><a href="../manual/flows.md.html">Flows</a></li>
  <li><a href="../manual/installation.md.html">Installation</a></li>
  <li><a href="../manual/listofcontrols.md.html">FSLabs cockpit controls</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/cockpit_control_binds.lua.html">cockpit_control_binds.lua</a></li>
  <li><a href="../examples/custom.lua.html">custom.lua</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>Event</code></h1>
<p>Copilot&rsquo;s event library.</p>
<p>
</p>


<h2><a href="#Class_Action">Class Action </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Action:new">Action:new(callback[, flags])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:setEnabled">Action:setEnabled(value)</a></td>
	<td class="summary">Enables or disables the action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:isThreadRunning">Action:isThreadRunning()</a></td>
	<td class="summary">Returns true if the callback was configured to be run as a coroutine and is running now.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:removeEventRef">Action:removeEventRef(refType, ...)</a></td>
	<td class="summary">Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopCurrentThread">Action:stopCurrentThread()</a></td>
	<td class="summary">If the action was configured to be run as a coroutine, stops the execution of the currently running coroutine immediately.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:stopOn">Action:stopOn(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addCleanup">Action:addCleanup(callback)</a></td>
	<td class="summary">Can be used when the action can be stopped &ndash; the callback will be executed when the action is stopped.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Action:addLogMsg">Action:addLogMsg(msg)</a></td>
	<td class="summary">Add log info that will be logged when the action is started or stopped</td>
	</tr>
</table>
<h2><a href="#Class_Event">Class Event </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Event:new">Event:new([data])</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addAction">Event:addAction(...)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:setActionOrder">Event:setActionOrder(action)</a></td>
	<td class="summary">Sets order of the event&rsquo;s actions relative to each other.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:addOneOffAction">Event:addOneOffAction(...)</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event:addAction">addAction</a> but the action will be removed from event&rsquo;s action list after it&rsquo;s executed once.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:removeAction">Event:removeAction(action)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event:trigger">Event:trigger(...)</a></td>
	<td class="summary">Triggers the event which in turn executes all actions (if they are enabled).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.waitForEvent">Event.waitForEvent(event, returnFunction)</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Event.waitForEvents">Event.waitForEvents(events[, waitForAll=false])</a></td>
	<td class="summary">Same as <a href="../libraries/Event.html#Event.waitForEvent">waitForEvent</a> but for multiple events</td>
	</tr>
</table>
<h2><a href="#Class_VoiceCommand">Class VoiceCommand </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:new">VoiceCommand:new(data)</a></td>
	<td class="summary">Constructor</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand.resetGrammar">VoiceCommand.resetGrammar()</a></td>
	<td class="summary">Call this static function inside a plugin lua file before activating or deactivating voice commands.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:getPhrases">VoiceCommand:getPhrases(dummy)</a></td>
	<td class="summary">Returns all phrase variants of a voice command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:setPersistence">VoiceCommand:setPersistence(persistenceMode)</a></td>
	<td class="summary">Sets persistence mode of a voice command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:addPhrase">VoiceCommand:addPhrase(phrase, dummy)</a></td>
	<td class="summary">Adds phrase variants to a voice command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:removePhrase">VoiceCommand:removePhrase(phrase, dummy)</a></td>
	<td class="summary">Removes phrase variants from a voice command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:removeAllPhrases">VoiceCommand:removeAllPhrases(dummy)</a></td>
	<td class="summary">Removes all phrase variants from a voice command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:setConfidence">VoiceCommand:setConfidence(confidence)</a></td>
	<td class="summary">Sets required confidence of a voice command.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:activate">VoiceCommand:activate()</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:ignore">VoiceCommand:ignore()</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:deactivate">VoiceCommand:deactivate()</a></td>
	<td class="summary"><span></td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:disable">VoiceCommand:disable()</a></td>
	<td class="summary">Deactivates the voice command and makes successive calls to <a href="../libraries/Event.html#VoiceCommand:activate">activate</a> and <a href="../libraries/Event.html#VoiceCommand:ignore">ignore</a> have no effect.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:getAction">VoiceCommand:getAction()</a></td>
	<td class="summary">If the voice command has only one action, returns that action.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:activateOn">VoiceCommand:activateOn(...)</a></td>
	<td class="summary">The voice command will become active when the events passed as parameters are triggered.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:deactivateOn">VoiceCommand:deactivateOn(...)</a></td>
	<td class="summary">The voice command will be deactivated when the events passed as parameters are triggered.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:ignoreOn">VoiceCommand:ignoreOn(...)</a></td>
	<td class="summary">The voice command will go into ignore mode when the events passed as parameters</p>

<p> are triggered.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#VoiceCommand:removeEventRef">VoiceCommand:removeEventRef(refType, ...)</a></td>
	<td class="summary">Disables the effect of <a href="../libraries/Event.html#VoiceCommand:activateOn">activateOn</a>, <a href="../libraries/Event.html#VoiceCommand:deactivateOn">deactivateOn</a> or <a href="../libraries/Event.html#VoiceCommand:ignore">ignore</a> for the default voice commands in <a href="../libraries/copilot.html#voiceCommands">copilot.voiceCommands</a></td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Class_Action"></a>Class Action </h2>

    <dl class="function">
    <dt>
    <a name = "Action:new"></a>
    <strong>Action:new(callback[, flags])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>


        </li>
        <li><span class="parameter">flags</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;runAsCoroutine&rsquo;
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:setEnabled"></a>
    <strong>Action:setEnabled(value)</strong>
    </dt>
    <dd>
    Enables or disables the action.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">value</span>
            <span class="types"><span class="type">bool</span></span>
         True to enable the action, false to disable.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Action:isThreadRunning"></a>
    <strong>Action:isThreadRunning()</strong>
    </dt>
    <dd>
    Returns true if the callback was configured to be run as a coroutine and is running now.







</dd>
    <dt>
    <a name = "Action:removeEventRef"></a>
    <strong>Action:removeEventRef(refType, ...)</strong>
    </dt>
    <dd>
    Use this you want to disable the effect of <a href="../libraries/Event.html#Action:stopOn">stopOn</a> for one of the predefined actions in <a href="../libraries/copilot.html#actions">copilot.actions</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">refType</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;stop&rsquo;
        </li>
        <li><span class="parameter">...</span>
         one or more <a href="#Class_Event">Event</a> object
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">copilot.actions.preflight:removeEventRef(<span class="string">'stop'</span>, copilot.events.enginesStarted)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:stopCurrentThread"></a>
    <strong>Action:stopCurrentThread()</strong>
    </dt>
    <dd>
    If the action was configured to be run as a coroutine, stops the execution of the currently running coroutine immediately.







</dd>
    <dt>
    <a name = "Action:stopOn"></a>
    <strong>Action:stopOn(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         One or more events. If the &lsquo;runAsCoroutine&rsquo; flag was passed to the constructor, the callback coroutine will be stopped when these events are triggered.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myAction:stopOn(copilot.events.takeoffAborted, copilot.events.takeoffCancelled)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Action:addCleanup"></a>
    <strong>Action:addCleanup(callback)</strong>
    </dt>
    <dd>
    Can be used when the action can be stopped &ndash; the callback will be executed when the action is stopped.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">callback</span>
            <span class="types"><span class="type">function</span></span>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "Action:addLogMsg"></a>
    <strong>Action:addLogMsg(msg)</strong>
    </dt>
    <dd>
    Add log info that will be logged when the action is started or stopped


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">msg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Class_Event"></a>Class Event </h2>

    <dl class="function">
    <dt>
    <a name = "Event:new"></a>
    <strong>Event:new([data])</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span> A table containing the following fields:
        <ul>
        <li><span class="parameter">action</span>
         Function or <a href="#Class_Action">Action</a> object or array of functions or <a href="#Class_Action">Action</a> objects that will be executed when the event is triggered.<br/>
 If it&rsquo;s an array of functions, each function can optionally be followed by string &lsquo;runAsCoroutine&rsquo;.<br/>
 Actions can also be added to an existing event via <a href="../libraries/Event.html#Event:addAction">addAction</a>.
         (<em>optional</em>)
        </li>
        <li><span class="parameter">logMsg</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         Message that will be logged when the event is triggered.
         (<em>optional</em>)
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> event1 = Event:new {
 action = <span class="keyword">function</span>() <span class="global">print</span> <span class="string">"test action"</span> <span class="keyword">end</span>,
 logMsg = <span class="string">"test event"</span>
}

<span class="keyword">local</span> event2 = Event:new {
 action = {
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 1"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>,
   <span class="keyword">function</span>() <span class="keyword">while</span> <span class="keyword">true</span> <span class="keyword">do</span> <span class="global">print</span> <span class="string">"coroutine 2"</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>, <span class="string">'runAsCourutine'</span>
 },
 logMsg = <span class="string">"test event with coroutine actions"</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addAction"></a>
    <strong>Event:addAction(...)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Either a function with the optional flag &lsquo;runAsCoroutine&rsquo; as the second argument or an <a href="#Class_Action">Action</a> object.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The added <a href="#Class_Action">Action</a> object.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>, <span class="string">'runAsCoroutine'</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:setActionOrder"></a>
    <strong>Event:setActionOrder(action)</strong>
    </dt>
    <dd>
    Sets order of the event&rsquo;s actions relative to each other.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">action</span>
         An action object which will serve as an anchor for positioning other actions in front or after it.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

         A table with four functions: &lsquo;front&rsquo;, &lsquo;back&rsquo;, &lsquo;before&rsquo; and &lsquo;after. 'Before&rsquo; and &lsquo;after&rsquo; take a variable
number of Action objects. All four functions optionally take a boolean as the last parameter which defaults to true
 if omitted. If the last parameter is true and both the anchor action and the other actions are coroutines,
 the coroutines will not be run simultaneously.</p>

<p> An error will be thrown if there is a cycle in the ordering.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> event = Event:new()

<span class="keyword">local</span> second = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"second"</span> <span class="keyword">end</span>)
<span class="keyword">local</span> first = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"first"</span> <span class="keyword">end</span>)
<span class="keyword">local</span> fourth = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"fourth"</span> <span class="keyword">end</span>)
<span class="keyword">local</span> third = event:addAction(<span class="keyword">function</span>() <span class="global">print</span> <span class="string">"third"</span> <span class="keyword">end</span>)

event:trigger()
 <span class="comment">-- second
</span> <span class="comment">-- first
</span> <span class="comment">-- fourth
</span> <span class="comment">-- third
</span>
<span class="global">print</span> <span class="string">"--------------------------------------------------"</span>

event:setActionOrder(first):before(second)
event:setActionOrder(second):before(third)
event:setActionOrder(third):before(fourth)

 <span class="comment">--[[
Another possibility:

event:setActionOrder(first):front()
event:setActionOrder(fourth):back()
event:setActionOrder(second):after(first):before(third)

]]</span>

event:trigger()

 <span class="comment">-- first
</span> <span class="comment">-- second
</span> <span class="comment">-- third
</span> <span class="comment">-- fourth
</span>
<span class="global">print</span> <span class="string">"--------------------------------------------------"</span>

event = event:new()

second = event:addAction(<span class="keyword">function</span>()
  <span class="keyword">for</span> _ = <span class="number">1</span>, <span class="number">4</span> <span class="keyword">do</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>
  <span class="global">print</span> <span class="string">"second"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

first = event:addAction(<span class="keyword">function</span>()
  <span class="keyword">for</span> _ = <span class="number">1</span>, <span class="number">5</span> <span class="keyword">do</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>
  <span class="global">print</span> <span class="string">"first"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

fourth = event:addAction(<span class="keyword">function</span>()
  <span class="global">print</span> <span class="string">"fourth"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

third = event:addAction(<span class="keyword">function</span>()
  <span class="keyword">for</span> _ = <span class="number">1</span>, <span class="number">3</span> <span class="keyword">do</span> <span class="global">coroutine</span>.yield() <span class="keyword">end</span>
  <span class="global">print</span> <span class="string">"third"</span>
<span class="keyword">end</span>, <span class="string">"runAsCoroutine"</span>)

event:setActionOrder(second):before(third):after(first)
event:setActionOrder(third):before(fourth)

event:trigger()

 <span class="comment">-- first
</span> <span class="comment">-- second
</span> <span class="comment">-- third
</span> <span class="comment">-- fourth</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:addOneOffAction"></a>
    <strong>Event:addOneOffAction(...)</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event:addAction">addAction</a> but the action will be removed from event&rsquo;s action list after it&rsquo;s executed once.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>


        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event:removeAction"></a>
    <strong>Event:removeAction(action)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">action</span>
         An <a href="#Class_Action">Action</a> object that was added to this event.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> myAction = myEvent:addAction(<span class="keyword">function</span>() <span class="keyword">end</span>)
myEvent:removeAction(myAction)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event:trigger"></a>
    <strong>Event:trigger(...)</strong>
    </dt>
    <dd>
    Triggers the event which in turn executes all actions (if they are enabled).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         Any number of arguments that will be passed to each callback. The callbacks will also receive the event as the first parameter.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "Event.waitForEvent"></a>
    <strong>Event.waitForEvent(event, returnFunction)</strong>
    </dt>
    <dd>
    <span>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">event</span>
         an <a href="#Class_Event">Event</a> object
        </li>
        <li><span class="parameter">returnFunction</span>
            <span class="types"><span class="type">bool</span></span>
         If true, waitForEvent returns a function that returns true once the event gets triggered, else waitForEvent returns when the event is triggered.
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Event.waitForEvent(copilot.events.landing)</pre>
    </ul>

</dd>
    <dt>
    <a name = "Event.waitForEvents"></a>
    <strong>Event.waitForEvents(events[, waitForAll=false])</strong>
    </dt>
    <dd>
    Same as <a href="../libraries/Event.html#Event.waitForEvent">waitForEvent</a> but for multiple events


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">events</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
         array of <a href="#Class_Event">Event</a> objects
        </li>
        <li><span class="parameter">waitForAll</span>
            <span class="types"><span class="type">bool</span></span>


         (<em>default</em> false)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">function</span></span>
        if waitForAll is true, this function works the same as the one returned by <a href="../libraries/Event.html#Event.waitForEvent">waitForEvent</a> and returns true once all events have been triggered</p>

<p> Otherwise, for every event that has been triggered, it returns the event object
    </ol>




</dd>
</dl>
    <h2 class="section-header has-description"><a name="Class_VoiceCommand"></a>Class VoiceCommand </h2>

          <div class="section-description">
          VoiceCommand is a subclass of <a href="#Class_Event">Event</a>. </p>

<p> A voice command can be in one of these  states:</p>

<ul>
<li><p>Active</p></li>
<li><p>Inactive</p></li>
<li><p>Ignore mode: the phrases are active in the recognizer but recognition events don&rsquo;t trigger the voice command.</p></li>
</ul>


<p> If you only have a couple of phrases active in the recognizer at a given time, especially short ones, the accuracy will be low and
 the recognizer will recognize just about anything as those phrases. On the other hand, having a lot of active phrases
 will also degrade the quality of recognition.<br>
          </div>
    <dl class="function">
    <dt>
    <a name = "VoiceCommand:new"></a>
    <strong>VoiceCommand:new(data)</strong>
    </dt>
    <dd>
    Constructor


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">data</span> A table containing the following fields (also the fields taken by <a href="../libraries/Event.html#Event:new">the parent constructor</a>):
        <ul>
        <li><span class="parameter">phrase</span>
         string or array of strings. <a href="../libraries/Event.html#VoiceCommand:addPhrase">You can modify the required confidence of each word in the phrase</a>
        </li>
        <li><span class="parameter">dummy</span>
         string or array of strings. One or multiple dummy phrase variants which will activated and deactivated
 synchronously with the voice command&rsquo;s actual phrase variants to help the recognizer discriminate between them and similarly
 sounding phrases. For example, the default &lsquo;takeoff&rsquo; voice command has a &lsquo;takeoff runway&rsquo; dummy phrase which is an item on the
 standard takeoff checklist.
        </li>
        <li><span class="parameter">confidence</span>
            <span class="types"><span class="type">number</span></span>
         between 0 and 1
         (<em>default</em> 0.93)
        </li>
        <li><span class="parameter">persistent</span>
        <ul>
<li>omitted or false: the voice command will be deactivated after being triggered.</li>
<li>&lsquo;ignore&rsquo;: the voice command will be put into ignore mode after being triggered.</li>
<li>true: the voice command will stay active after being triggered.</li>
</ul>


         (<em>default</em> false)
        </li>
        </li></ul>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> myVoiceCommand = VoiceCommand:new {
 phrase = <span class="string">"hello"</span>,
 confidence = <span class="number">0.95</span>,
 action = <span class="keyword">function</span>() <span class="global">print</span> <span class="string">"hi there"</span> <span class="keyword">end</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "VoiceCommand.resetGrammar"></a>
    <strong>VoiceCommand.resetGrammar()</strong>
    </dt>
    <dd>
    Call this static function inside a plugin lua file before activating or deactivating voice commands.







</dd>
    <dt>
    <a name = "VoiceCommand:getPhrases"></a>
    <strong>VoiceCommand:getPhrases(dummy)</strong>
    </dt>
    <dd>
    Returns all phrase variants of a voice command.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dummy</span>
            <span class="types"><span class="type">bool</span></span>
         True to return dummy phrase variants, omitted or false to return actual phrase variants.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Array of strings.
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:setPersistence"></a>
    <strong>VoiceCommand:setPersistence(persistenceMode)</strong>
    </dt>
    <dd>
    Sets persistence mode of a voice command.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">persistenceMode</span>
        <ul>
<li>omitted or false: the voice command will be deactivated after being triggered.</li>
<li>&lsquo;ignore&rsquo;: the voice command will be put into ignore mode after being triggered.</li>
<li>true: the voice command will stay active after being triggered.</li>
</ul>


        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:addPhrase"></a>
    <strong>VoiceCommand:addPhrase(phrase, dummy)</strong>
    </dt>
    <dd>
    Adds phrase variants to a voice command. </p>

<p>The SAPI recognizer has two confidence metrics &ndash; a float from 0-1 and another one that has three states: low, normal and high.
If a word is preceded by a &lsquo;+&rsquo; or &lsquo;&ndash;&rsquo;, its required confidence is set to &lsquo;high&rsquo; or &lsquo;low&rsquo;, respectively, otherwise, it has the default required confidence &lsquo;normal&rsquo;.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">phrase</span>
         string or array of strings
        </li>
        <li><span class="parameter">dummy</span>
            <span class="types"><span class="type">bool</span></span>
         True to add dummy phrase variants, omitted or false to add actual phrase variants.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:removePhrase"></a>
    <strong>VoiceCommand:removePhrase(phrase, dummy)</strong>
    </dt>
    <dd>
    Removes phrase variants from a voice command.
 + and &ndash; in front of a word are ignored. For example, removePhrase(&ldquo;hello world&rdquo;) will remove both &ldquo;+hello -world&rdquo; and &ldquo;hello world&rdquo;.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">phrase</span>
         string or array of strings
        </li>
        <li><span class="parameter">dummy</span>
            <span class="types"><span class="type">bool</span></span>
         True to remove dummy phrase variants, omitted or false to remove actual phrase variants.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:removeAllPhrases"></a>
    <strong>VoiceCommand:removeAllPhrases(dummy)</strong>
    </dt>
    <dd>
    Removes all phrase variants from a voice command.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dummy</span>
            <span class="types"><span class="type">bool</span></span>
         True to remove dummy phrase variants, omitted or false to remove actual phrase variants.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:setConfidence"></a>
    <strong>VoiceCommand:setConfidence(confidence)</strong>
    </dt>
    <dd>
    Sets required confidence of a voice command.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">confidence</span>
            <span class="types"><span class="type">number</span></span>
         A number from 0-1
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:activate"></a>
    <strong>VoiceCommand:activate()</strong>
    </dt>
    <dd>
    <span>



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:ignore"></a>
    <strong>VoiceCommand:ignore()</strong>
    </dt>
    <dd>
    <span>



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:deactivate"></a>
    <strong>VoiceCommand:deactivate()</strong>
    </dt>
    <dd>
    <span>



    <h3>Returns:</h3>
    <ol>

        self
    </ol>




</dd>
    <dt>
    <a name = "VoiceCommand:disable"></a>
    <strong>VoiceCommand:disable()</strong>
    </dt>
    <dd>
    Deactivates the voice command and makes successive calls to <a href="../libraries/Event.html#VoiceCommand:activate">activate</a> and <a href="../libraries/Event.html#VoiceCommand:ignore">ignore</a> have no effect.







</dd>
    <dt>
    <a name = "VoiceCommand:getAction"></a>
    <strong>VoiceCommand:getAction()</strong>
    </dt>
    <dd>
    If the voice command has only one action, returns that action.  All default voice commands have only one action.







</dd>
    <dt>
    <a name = "VoiceCommand:activateOn"></a>
    <strong>VoiceCommand:activateOn(...)</strong>
    </dt>
    <dd>
    The voice command will become active when the events passed as parameters are triggered. </p>

<p> Adds an &lsquo;activate&rsquo; event reference that can be removed from the event via <a href="../libraries/Event.html#VoiceCommand:removeEventRef">removeEventRef</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
          one or more events
        </li>
    </ul>





</dd>
    <dt>
    <a name = "VoiceCommand:deactivateOn"></a>
    <strong>VoiceCommand:deactivateOn(...)</strong>
    </dt>
    <dd>
    The voice command will be deactivated when the events passed as parameters are triggered. </p>

<p> Adds a &lsquo;deactivate&rsquo; event reference that can be removed from the event via <a href="../libraries/Event.html#VoiceCommand:removeEventRef">removeEventRef</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
          one or more events
        </li>
    </ul>





</dd>
    <dt>
    <a name = "VoiceCommand:ignoreOn"></a>
    <strong>VoiceCommand:ignoreOn(...)</strong>
    </dt>
    <dd>
    The voice command will go into ignore mode when the events passed as parameters</p>

<p> are triggered. </p>

<p> Adds a &lsquo;ignore&rsquo; event reference that can be removed from the event via <a href="../libraries/Event.html#VoiceCommand:removeEventRef">removeEventRef</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
          one or more events
        </li>
    </ul>





</dd>
    <dt>
    <a name = "VoiceCommand:removeEventRef"></a>
    <strong>VoiceCommand:removeEventRef(refType, ...)</strong>
    </dt>
    <dd>
    Disables the effect of <a href="../libraries/Event.html#VoiceCommand:activateOn">activateOn</a>, <a href="../libraries/Event.html#VoiceCommand:deactivateOn">deactivateOn</a> or <a href="../libraries/Event.html#VoiceCommand:ignore">ignore</a> for the default voice commands in <a href="../libraries/copilot.html#voiceCommands">copilot.voiceCommands</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">refType</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         &lsquo;activate&rsquo;, &lsquo;deactivate&rsquo; or &lsquo;ignore&rsquo;
        </li>
        <li><span class="parameter">...</span>
         one or more <a href="#Class_Event">Event</a> objects
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">copilot.voiceCommands.gearUp:removeEventRef(<span class="string">'activate'</span>,
copilot.events.goAround, copilot.events.takeoffInitiated)</pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-06-06 22:45:25 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
